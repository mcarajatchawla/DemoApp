library "SharedLib"
env.SONAR_HOST="http://localhost:9000/"
node {
    stage("Startup"){
        repoClone("https://github.com/mcarajatchawla/DemoApp.git", "master")
    }
    stage("Maven Build"){
        mavenBuild()
    }

    stage("Code Analysis"){
        sonarScan()
    }

    stage("Security Analysis"){
        parallel(
            checkmarx: {
                checkmarxScan()
            },
            nexusIQ: {
                nexusIQScan()
            }
        )
    }

    stage("Maven Pubish"){

    }
}